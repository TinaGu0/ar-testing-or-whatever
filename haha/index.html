<!DOCTYPE html>
<html>
  <head>
    <title>AR.js with Custom Model</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/ar.js/master/aframe/build/aframe-ar.js"></script>
    <script src="what.js"></script>
    <script src="//cdn.8thwall.com/web/xrextras/xrextras.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden;">
    <a-scene 
    embedded 
    arjs='sourceType: webcam;'
    renderer="logarithmicDepthBuffer: true;"
    vr-mode-ui="enabled: false"
    gesture-detector
    id="scene">
      <a-marker preset='hiro'>
        <a-entity
          id="model"
          gltf-model="url(/public/sky.glb)"
          scale="x, y, z"
          rotation="1, 1, 1"
          position="0 0 0"
          class="cantap"
          xrextras-hold-drag 
          xrextras-two-finger-rotate 
          xrextras-pinch-scale 
          gesture-handler="minScale: 0.25; maxScale:10"
        ></a-entity>
      </a-marker>
      <a-camera
      id="camera"
      raycaster="objects: .cantap"></a-camera>
      <a-plane
        id="ground" 
        rotation="-90 0 0" 
        width="1000" 
        height="1000" 
        material="shader: shadow" 
        shadow>
      </a-plane>
    </a-scene>
<!--     <script src="huh.js"></script> -->
  </body>
</html>

<script>
  let entity = document.querySelector('a-entity');


  entity.object3D.scale.x = 0.5;
  entity.object3D.scale.y = 0.5;
  entity.object3D.scale.z = 0.5;

/* sceneEl.addEventListener("click", one());
// sceneEl.addEventListener("", two());

sceneEl.addEventListener("markerFound", (e) => {
    isMarkerVisible = true;
});

sceneEl.addEventListener("markerLost", (e) => {
    isMarkerVisible = false;
});
 */
function one(event) {
  if(isMarkerVisible) [
    el.object3D.rotation.y += 
    event.detail.positionChange.x * rotationFactor,

    el.object3D.rotation.x +=
    event.detail.positionChange.y * rotationFactor
  ]
}

function two(event) {
  if (isMarkerVisible) {
      this.scaleFactor *=
        1 + event.detail.spreadChange / event.detail.startSpread;

      this.scaleFactor = Math.min(
        Math.max(this.scaleFactor, this.data.minScale),
        this.data.maxScale
      );

      el.object3D.scale.x = scaleFactor * initialScale.x;
      el.object3D.scale.y = scaleFactor * initialScale.y;
      el.object3D.scale.z = scaleFactor * initialScale.z;
    }
}
</script>
